.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "DNST-SIGNZONE" "1" "Jun 04, 2025" "0.1.0-rc1" "dnst"
.SH NAME
dnst-signzone \- Sign the zone with the given key(s)
.SH SYNOPSIS
.sp
\fBdnst signzone\fP \fB[OPTIONS]\fP \fB\-o <ORIGIN>\fP \fB<ZONEFILE>\fP \fB<KEY>...\fP
.SH DESCRIPTION
.sp
\fBdnst signzone\fP signs the zonefile with the given key(s).
.sp
Signing a zone adds DNS Security Extensions (DNSSEC)  resource records
.sp
Keys must be specified by their base name (usually \fBK<name>+<alg>+<id>\fP),
i.e. WITHOUT the \fB\&.private\fP or \fB\&.key\fP extension. Both \fB\&.private\fP and
\fB\&.key\fP files are required.
.SH ARGUMENTS
.INDENT 0.0
.TP
.B <ZONEFILE>
The zonefile to sign. Any existing NSEC(3) and/or RRSIG resource records
will be skipped when loading the file.
.UNINDENT
.INDENT 0.0
.TP
.B <KEY>...
The keys to sign the zonefile with.
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.TP
.B \-d
Do not add used keys to the resulting zonefile.
.UNINDENT
.INDENT 0.0
.TP
.B \-e <DATE>
Set the expiration date of signatures to this date (see
\fI\%DATES\fP). Defaults to 4 weeks from now.
.UNINDENT
.INDENT 0.0
.TP
.B \-f <FILE>
Write signed zone to file. Use \fB\-f \-\fP to output to stdout. Defaults to
\fB<ZONEFILE>.signed\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-i <DATE>
Set the inception date of signatures to this date (see
\fI\%DATES\fP). Defaults to now.
.UNINDENT
.INDENT 0.0
.TP
.B \-o <DOMAIN>
Use this owner name as the apex of the zone. Mandatory.
.UNINDENT
.INDENT 0.0
.TP
.B \-u
Set SOA serial to the number of seconds since Jan 1st 1970.
.sp
If this would NOT result in the SOA serial increasing it will be
incremented instead.
.UNINDENT
.INDENT 0.0
.TP
.B \-n
Use NSEC3 instead of NSEC. By default, RFC 9276 best practice settings
are used: SHA\-1, no extra iterations, empty salt. To use different NSEC3
settings see \fI\%NSEC3 options\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-A
Sign DNSKEYs with all keys instead of the minimal set.
.UNINDENT
.INDENT 0.0
.TP
.B \-U
Sign with every unique algorithm in the provided keys.
.UNINDENT
.INDENT 0.0
.TP
.B \-z <[SCHEME:]HASH>
Add a ZONEMD resource record. Accepts both mnemonics and numbers.
This option can be provided more than once to add multiple ZONEMD RRs.
However, only one per scheme\-hash tuple will be added.
.nf
HASH supports \fBSHA384\fP (1) and \fBSHA512\fP (2).
SCHEME supports \fBSIMPLE\fP (1), the default.
.fi
.sp
.UNINDENT
.INDENT 0.0
.TP
.B \-Z
Allow adding ZONEMD RRs without signing the zone. With this option, the
<KEY>... argument becomes optional and determines whether to sign the
zone.
.UNINDENT
.INDENT 0.0
.TP
.B \-H
Hash only, don\(aqt sign. With this option, the normally mandatory <KEY>...
argument can be omitted.
.UNINDENT
.INDENT 0.0
.TP
.B \-h, \-\-help
Print the help text (short summary with \fB\-h\fP, long help with
\fB\-\-help\fP).
.UNINDENT
.SH OUTPUT FORMATTING OPTIONS
.sp
The following options can be used to affect the format of the output.
.INDENT 0.0
.TP
.B \-b
Add comments on DNSSEC records. Without this option only DNSKEY RRs
will have their key tag annotated in the comment.
.UNINDENT
.INDENT 0.0
.TP
.B \-L
Preceed the zone output by a list that contains the NSEC3 hashes of the
original ownernames.
.UNINDENT
.INDENT 0.0
.TP
.B \-O
Order NSEC3 RRs by unhashed owner name.
.UNINDENT
.INDENT 0.0
.TP
.B \-R
Order RRSIG RRs by the record type that they cover.
.UNINDENT
.INDENT 0.0
.TP
.B \-T
Output YYYYMMDDHHmmSS RRSIG timestamps instead of seconds since epoch.
.UNINDENT
.SH NSEC3 OPTIONS
.sp
The following options can be used with \fB\-n\fP to override the default NSEC3
settings used.
.INDENT 0.0
.TP
.B \-a <ALGORITHM NUMBER OR MNEMONIC>
Specify the hashing algorithm. Defaults to SHA\-1.
.UNINDENT
.INDENT 0.0
.TP
.B \-s <STRING>
Specify the salt as a hex string. Defaults to \fB\-\fP, meaning empty salt.
.UNINDENT
.INDENT 0.0
.TP
.B \-t <NUMBER>
Set the number of extra hash iterations. Defaults to 0.
.UNINDENT
.INDENT 0.0
.TP
.B \-p
Set the opt\-out flag on all NSEC3 RRs.
.UNINDENT
.INDENT 0.0
.TP
.B \-P
Set the opt\-out flag on all NSEC3 RRs and skip unsigned delegations.
.UNINDENT
.SH DATES
.sp
A date can be a UNIX timestamp as seconds since the Epoch (1970\-01\-01
00:00 UTC), or of the form \fB<YYYYMMdd[hhmmss]>\fP\&.
.SH AUTHOR
NLnet Labs
.SH COPYRIGHT
2024â€“2025, NLnet Labs
.\" Generated by docutils manpage writer.
.
