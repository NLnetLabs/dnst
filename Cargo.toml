[package]
name = "dnst"
version = "0.1.0"
edition = "2021"
default-run = "dnst"
readme = "README.md"
repository = "https://github.com/nlnetlabs/dnst/"
authors = ["NLnet Labs <dns-team@nlnetlabs.nl>"]
description = "Rust reimplementation of important ldns programs."
categories = ["command-line-utilities"]
license = "BSD-3-Clause"
keywords = ["DNS", "domain", "ldns"]
rust-version = "1.79"

[[bin]]
name = "ldns"
path = "src/bin/ldns.rs"

[features]
default = ["openssl", "ring"]

# Cryptographic backends
openssl = ["domain/openssl"]
ring = ["domain/ring"]

[dependencies]
bytes = "1.8.0"
chrono = "0.4.38"
clap = { version = "4.3.4", features = ["cargo", "derive"] }
domain = { git = "https://github.com/NLnetLabs/domain.git", branch = "main", features = [
    "bytes",
    "net",
    "resolv",
    "tokio-stream",
    "tsig",
    "unstable-client-transport",
    "unstable-sign",
    "unstable-validator",
    "unstable-zonetree",
] }
lexopt = "0.3.0"
rayon = "1.10.0"
octseq = "0.5.2"
ring = "0.17.8"
tokio = "1.40.0"

# LDNS-xxx mode specific dependencies.
# TODO: put these behind a feature gate?
jiff = { version = "0.1.15", default-features = false, features = ["alloc", "std"] }

# This is a workaround. lazy_static 1.0.0 fails to compile, but sharded-slab
# still uses it. And sharded-slab is used by tracing-subscriber, which is
# used by domain, which is used by us.
_unused_lazy_static = { package = "lazy_static", version = "1.0.2" }
tracing = "0.1.41"
tracing-subscriber = "0.3.19"

[dev-dependencies]
const_format = " 0.2.33"
test_bin = "0.4.0"
tempfile = "3.14.0"
regex = "1.11.1"
domain = { git = "https://github.com/NLnetLabs/domain.git", branch = "main", features = [
    "unstable-stelline",
] }
pretty_assertions = "1.4.1"
